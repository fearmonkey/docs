---
title: "Salesforce Commerce Cloud"
description: "Integrate OwnID into Salesforce Commerce Cloud using a cartridge."
---
import NextStepsSnippet from '/snippets/next-steps-after-integ.mdx';

import BuildAppSnippet from '/snippets/create-app-simple.mdx';

import UserDataSnippet from '/snippets/user-data-statement.mdx';

Integration with Salesforce Commerce Cloud (SFCC) provides the full set of OwnID's passwordless user journeys to your users. 

OwnID integrates with SFCC through their built-in API client, using our SFCC Connector and a SFCC _cartridge_.

## Prerequisites

Request the _Sales Force Commerce Cloud_ cartridge from [this page](https://ownid.com/enterprise-connectors/salesforce-commerce-cloud).

See: [OAuth Client Credentials](https://help.salesforce.com/s/articleView?id=cc.b2c_account_manager_add_api_client_id.htm&type=5)

## Step 1 - SFCC Credentials

### Create Credentials

1. Log into the SFCC Account Manager. 
1. Select API Client from the left side menu. 
1. Click `Add API Client`.
1. Enter Display Name "OwnID Integration".
1. Enter a password.
1. Assign your organization.
1. Assign the following roles: 
- `Sandbox API User` 
- `Salesforce Commerce Cloud`
8. In the _Token Endpoint Auth Method_, select `private_key_jwt`.
9. Click **Save Changes**. 

<img
  width="600"
  src="/images/SFCC-step1.jpeg"
  alt="SFCC Account Manager"
  />
<sup>Figure 1. Salesforce API Client Creation</sup>

Saleforce displays your `Client Id` and `Secret`. Save these values for later use.

### Assign Permissions

Go to _Administration > Site Development > Open Commerce API Settings_.

1. Add the following JSON object to the shop tab:

```json shop
{
  "_v": "23.1",
  "clients": [
    {
      "allowed_origins": [
      ],
      "client_id": "Client ID",
      "resources": [
        {
          "resource_id": "/customers/auth/trustedsystem",
          "methods": [
            "post"
          ],
          "read_attributes": "(**)",
          "write_attributes": "(**)"
        },
        {
          "resource_id": "/sessions",
	           "methods": [
            "post"
          ],
          "read_attributes": "(**)",
          "write_attributes": "(**)"
        }
     ]
   }
 ]
}
```
2. Change `client_id` value in the _shop_ JSON to match the `Client Id` created in the previous step.

3. If the OCAPI configuration is already in place, simply include the following resource into the resources section. 

```json
{
  "resource_id": "/customers/auth/trustedsystem",
   "methods": [
       "post"
   ],
   "read_attributes": "(**)",
   "write_attributes": "(**)"
},
{
   "resource_id": "/sessions",
   "methods": [
       "post"
   ],
   "read_attributes": "(**)",
   "write_attributes": "(**)"
}
```

<img
  width="500"
  src="/images/SFCC-shop-json.jpeg"
  alt="SFCC Account Manager"
  />
<sup>Figure 2. Example JSON configuration in _shop_ tab</sup>

4. Add the following JSON object to the _shop_ tab:

```json data
{
  "_v": "23.1",
  "clients": [
    {
      "allowed_origins": [
      ],
      "client_id": "Your Client ID",
      "resources": [
       {
          "resource_id": "/customer_lists/*/customers/*",
          "methods": ["get", "patch"],
          "read_attributes": "(**)",
          "write_attributes": "(**)"
       },
       {
         "resource_id":"/customer_lists/*/customer_search",
         "methods": ["post"],
         "read_attributes": "(**)",
         "write_attributes": "(**)"
        },
   {
    "resource_id":"/ocapi_configs/*",
    "methods": ["get"],
    "read_attributes": "(**)",
    "write_attributes": "(**)"
   }
   ]   
  }
  ]
}
```
<img
  width="500"
  src="/images/SFCC-data-json.jpeg"
  alt="SFCC Account Manager"
  />
<sup>Figure 3. Example JSON configuration in _data_ tab</sup>

5. Change the `client_id` value in the JSON to match the `Client Id` created in the previous step. 

<UserDataSnippet/>

## Step 2 - Create OwnID Application

<BuildAppSnippet connector_name="SalesForce"/>


1. Open the Salesforce integration page.
1. Enter the Instance Hostname - _e.g: xyzb-001.dx.commercecloud.salesforce.com_ (only the domain, without protocol).
1. Enter a Site ID - _e.g: RefArch_ (case sensitive). 
1. Enter the API Client ID (generated in the previous step).
1. Enter the API Client Secret (generated in the previous step).
1. Enter the SFCC Username (get it from the Account Manager).
1. Enter the SFCC Password.
1. Save Changes.

<img
  width="400"
  src="/images/SFCC-ownid-console.jpeg"
  alt="SFCC Account Manager"
  />
<sup>Figure 4. OwnID Console</sup>

Copy the `appId` so you can use it in the next step.

## Step 3 - SFCC Cartridge Installation

1. Upload and add the cartridge to the target site.
1. Navigate to `Merchant Tools > Site Preferences > Custom Preferences > OwnID` and set the following preferences:
1. Set `EnableOwnId` to `true` to display the OwnID widget.
1. `Env` Select the OwnID production environment.
1. Enter the `AppId` previously copied from the OwnID Console.

<img
  width="500"
  src="/images/SFCC-cartridge.jpeg"
  alt="SFCC Account Manager"
  />
<sup>Figure 5. OwnID Cartridge Configuration</sup>

<Check>Congratulations! Enjoy your passwordless authentication!</Check>

<NextStepsSnippet/>

