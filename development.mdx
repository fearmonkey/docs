---
title: 'Server-side integration'
description: 'Learn how to set up endpoints and request handlers'
---

## The basics

Typically when you consume an API, it means that you're making RESTful requests to endpoints hosted by a public platform.

Here, your existing web server is the host. When a user logs in, your frontend generates a login event and the OwnID server makes the appropriate HTTP requests to _your web server_, invoking request handlers provided by OwnID. 

It's those request handlers that provide the gateway for exchanging keys and data between your frontend and your identity management services. 

## Supported authentication workflow

Three endpoints support all the login and registration scenarios:

- Login

- register

- forgotPassword

## Integration overview

Below are the major steps required to implement the login workflow and integrate with the OwnID API. 

<Steps>
  <Step title="PREPARATION">
    **1. Setup your account** - Get your App Id and establish your base URL from the [OwnID Console](https://console.ownid.com/login).   
    **2. Add a field for OwnID data to your users table** - OwndId data requires a varchar field in your database, with a minimum of 4000 characters.
  </Step>
  <Step title="DROP IN SERVER-SIDE END-POINTS">
  _These end-points are called by the OwnID server when it receives login events from your frontend._  
    **1. Install API Request Handlers** - Take our sample code for API request handlers and drop it into your web server.  
    **2. Adjust handler parameters** - Adjust parameters for each request handler.  
  </Step>
  <Step title="INSERT WEBSDK CALLS INTO YOUR LOGIN PAGE">
    **1. Build login workflow** - Drop in our HTML and JavaScript samples to build the login workflow.  
    **2. Build registration workflow** - Drop in our HTML and JavaScript samples to build the registration workflow.

  </Step>
  
</Steps>

## 1 Preparation

First create your account in the developer portal.

1. **Set up your account** by logging into or signing up to the developer console and following the instructions. The console guides you through the process step by step.
2. As part of the sign up process, you'll establish the parameters you need for integration:

- Your **account id** - _Use this in data objects where specified_
- Your **application id** - _Use this also in data objects where specified_
- Your **base URL** - _You'll establish this as part of creating your account in the console. OwnID uses this to call endpoints on your backend_

3. **Create a VARCHAR field** in your user database and call it `ownIdData`. We'll use this field to store OwnID authentication data. 

<Info>
Be sure the field meets the following requirements:

- A character datatype e.g., **VARCHAR**
- A minimum length of **5000 chars**
</Info>

## 2 Drop in server-side end-points

We provide templates for the event handler you use for your server-side endpoints. These endpoints are called by the OwnID server when it receives login events from your login page. 

Select your server-side language tab in the examples below. The following data elements are used to build login worflows:

- App id, your unique app identifier.
- token
- Add a character field for Own id data.

register	1.config : IWidgetConfig	Renders a widget with register type
login	1.config : IWidgetConfig	Renders a widget with login type
recover	1.config : IWidgetConfig	Renders a widget with recover type

## Login workflow

Referencing the `loginId` input

Placing the widget next to the password field 

<img
  src="/images/oi_widget.png"
  alt="Widget"
/>
<sup>Figure 1. Login widget</sup>

(side-by-side)
Handling password-toggle or password-label elements
Showing errors in your login form

``` javascript
ownid('login', {
          loginIdField: 
          document.getElementById('username'),
          passwordField: 
          document.getElementById('password'),
     passwordToggle:'.show-password-input',
          language:'en',
          onError: (error) => console.log(error),
          onLogin({ token }) { /*see below*/ }
});
```
You don't have to implement an explicit registration workflow becuase login handles unregistered users. Auto-registration when the account doesn't exist
As part of `/setOwnIDDataByLoginId` endpoint implementation

Establishing the session on `onLogin`

Direct:

```javascript
{ onLogin({ token }) { document.cookie = 
  `sessionId=${token}`; 
  } 
}

Exchange: [when session is an `http-only` cookie]
{ onLogin({ token }) 
  { fetch(`/auth/exchange?token=${token}`); } }
```
Setting a global login handler:
```javascript
ownid('init', { 
    onLogin: ({token}) => {}
})
```

<img
  src="/images/login-diagram.png"
  alt="Widget"
/>


Good



# Handler Reference

### IWidgetConfig

<ParamField query="type" type="WidgetType" default="none" required>
Defines widget type. Determinate flow type.
</ParamField>

<ParamField query="loginType" type="loginType" default="standard" >
Defines login type. Changes flow.

</ParamField>

<ParamField query="promptType" type="promptTypes" default="returning-user">
Used only for prompt widget. Defines prompt type
</ParamField>

<ParamField query="element" type="HTMLElement" default="returning-user">
Used only for prompt widget. Defines prompt type
</ParamField>








‚óè linkSocialAccount - is used ONLY for gigyas link-accounts screenset & integration








